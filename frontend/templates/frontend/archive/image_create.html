{% extends "frontend/base.html" %}
{% block b1 %}
<h3 class='mb-5'>Image Card 생성 페이지</h3>
<div id="form-wrapper">
  <form id="form" class="mt-3">
        <input id="original_name" class="form-control mb-4" type="text" placeholder="name" autocomplete="off">
        <input id="image-source" class="form-control mb-4" type="text" placeholder="image 출처" autocomplete="off">
        <textarea id="info" rows="8" cols="80" class="form-control mb-4" placeholder="info"></textarea>
  </form>
  <button id="create" class="btn btn-dark btn-lg">생성하기</button>
</div>

<script>
  var csrftoken = getCookie('csrftoken');

  function create(){
    var original_name = document.getElementById('original_name').value
    var image_source = document.getElementById('image-source').value
    var info = document.getElementById('info').value
    var url = "/api/archive/image_list/{{archive_id}}/"

    fetch(url, {
      method: 'post',
      headers: {
        'Content-type':'application/json',
        'X-CSRFToken': csrftoken
      },
      body: JSON.stringify({
        'original_name': original_name,
        'image_source': image_source,
        'info': info
      })
    })
    .then((resp) => {
      console.log(resp)
      window.location.href="/archive/{{archive_id}}/"
    })
    .catch(error => console.log(error))
  }

  var create_button = document.getElementById('create')
  create_button.addEventListener('click', create)
</script>
{% endblock %}
